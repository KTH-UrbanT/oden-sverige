{"version":3,"sources":["components/BuildingDetail.js","components/PrettyMap.js","components/App.js","index.js"],"names":["FetchColor","color","ek","InvertHeader","BuildingDetail","props","undefined","IdAdr","EgiEnergiklass","EgiPrimarenergital","EgenNybyggAr","mapboxgl","accessToken","PrettyMap","state","lng","lat","zoom","layers","name","icon","hoverText","activeLayer","map","Map","container","this","mapContainer","style","center","on","setState","getCenter","toFixed","getZoom","e","Popup","closeButton","setLngLat","lngLat","setHTML","features","properties","addTo","getCanvas","cursor","addControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","NavigationControl","toggleableLayerIds","menuIcons","hoverTexts","i","length","id","iconImage","button","document","createElement","Name","href","title","className","appendChild","onclick","clickedLayer","preventDefault","stopPropagation","getLayoutProperty","getElementsByClassName","setLayoutProperty","ref","element","React","Component","App","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.1449e35f.chunk.js","sourcesContent":["import React from \"react\";\n\nconst BuildingDetail = (props) => {\n  if (props.IdAdr !== undefined) {\n    return (\n      \"<div class='ui fluid card'>\"+\n        \"<div class='ui top attached \"+InvertHeader(props.EgiEnergiklass)+\" padded segment' style=background-color:\"+FetchColor(props.EgiEnergiklass)+\">\"+\n\n            \"<h2 class='ui header' >\"+\n              \"<span class='right floated header'>\"+\n                \"<div class='ui large \"+InvertHeader(props.EgiEnergiklass)+\" header'>\"+\n                  props.EgiEnergiklass+\n                \"</div>\"+\n              \"</span>\"+\n\n              props.IdAdr+\n              \"<div class='sub header'>\"+\n                props[\"50A_ByggnadsAndamal\"]+\n              \"</div>\"+\n\n            \"</h2>\"+\n        \"</div>\"+\n\n        \"<div class='ui bottom attached padded segment'>\"+\n          \"<div class='content'>\"+\n            \"<h4 class='ui header'>\"+\n              \"Primärenergital: \"+props.EgiPrimarenergital+\" kWh/m²\"+\n              \"<div class='sub header'>Byggår: \"+props.EgenNybyggAr+\"</div>\"+\n            \"</h4>\"+\n          \"</div>\"+\n        \"</div>\"+\n      \"</div>\"\n    )}\n    else { return (\n      \"<div class='ui card'>\"+\n        \"<div class ='content'>\"+\n          \"<h4>Ingen data</h4>\"+\n        \"</div>\"+\n      \"</div>\"\n    )\n  }\n};\n\nconst FetchColor = (ek = null) => {\n  var color;\n\n  switch(ek){\n    case 'A': color= '#2166ac';\n      break;\n    case 'B': color= '#67a9cf';\n      break;\n    case 'C': color= '#d1e5f0';\n      break;\n    case 'D': color= '#f7f7f7';\n      break;\n    case 'E': color= '#fddbc7';\n      break;\n    case 'F': color= '#ef8a62';\n      break;\n    case 'G': color= '#b2182b';\n      break;\n    default: color= '#b2182b';\n  }\n  return color;\n}\n\nconst InvertHeader = (ek = null) => {\n  return ek==='C'||ek==='D'||ek==='E' ? '' : 'inverted';\n}\n\nconst ClassFetchColor = (ek = null) => {\n  var color;\n\n  switch(ek){\n    case 'A': color= '#ffffb2';\n      break;\n    case 'B': color= '#fed976';\n      break;\n    case 'C': color= '#feb24c';\n      break;\n    case 'D': color= '#fd8d3c';\n      break;\n    case 'E': color= '#fc4e2a';\n      break;\n    case 'F': color= '#e31a1c';\n      break;\n    case 'G': color= '#b10026';\n      break;\n    default: color= '#b10026';\n  }\n  return color;\n}\n\nconst NumericFetchColor = (value = null) => {\n  if (value<75) {\n    return 'green';\n  } else if (value<106) {\n    return 'olive';\n  } else if (value<138) {\n    return 'yellow';\n  }  else if (value<169) {\n    return 'orange';\n  } else return 'red';\n}\n\nexport default BuildingDetail;\n","import React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n\nimport BuildingDetail from \"./BuildingDetail\";\nimport \"./PrettyMap.css\";\n\nmapboxgl.accessToken =\n  \"pk.eyJ1Ijoib2xla3NpaXBhc2ljaG55aSIsImEiOiJjaXRvZnN0Z2owMDBoMnRueTl3dDB1OXd3In0.Sog1Iz1Vc1RlMucteIEP_A\";\n\n\nclass PrettyMap extends React.Component {\n  // Map defaults\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: 18.0665,\n      lat: 59.3249,\n      zoom: 13.5,\n\n      layers: [\n        { name: \"energiklass\", icon: \"fire\", hoverText: \"Visa primärenergikarta\" },\n        { name: \"byggnadsaldre\", icon: \"hourglass\", hoverText: \"Visa byggnadsäldrekarta\" },\n      ],\n\n      activeLayer: \"energiklass\"\n    };\n  };\n\n  // onLayerSelect = (index) => {\n  //   this.setState({ activeLayer: this.state.layers[index].name });\n  // };\n\n  componentDidMount() {\n    // Initialize map\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: \"mapbox://styles/oleksiipasichnyi/ckbjnkd3k2jai1iljl8ymszc1\",\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom\n    });\n\n    // Adjust view after moving map\n    map.on(\"move\", () => {\n      this.setState({\n        lng: map.getCenter().lng.toFixed(4),\n        lat: map.getCenter().lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2),\n      });\n    });\n\n    // Show popup with building properties\n    map.on(\"click\", \"energiklass\", function (e) {\n      new mapboxgl.Popup({ closeButton: false })\n        .setLngLat(e.lngLat)\n        .setHTML(BuildingDetail(e.features[0].properties))\n        .addTo(map);\n    });\n    map.on(\"click\", \"byggnadsaldre\", function (e) {\n      new mapboxgl.Popup({ closeButton: false })\n        .setLngLat(e.lngLat)\n        .setHTML(BuildingDetail(e.features[0].properties))\n        .addTo(map);\n    });\n\n    // Change the cursor to a pointer when the mouse is over the states layer\n    map.on(\"mouseenter\", \"energiklass\", function () {\n      map.getCanvas().style.cursor = \"pointer\";\n    });\n    map.on(\"mouseenter\", \"byggnadsaldre\", function () {\n      map.getCanvas().style.cursor = \"pointer\";\n    });\n\n    // Change it back to a pointer when it leaves\n    map.on(\"mouseleave\", \"energiklass\", function () {\n      map.getCanvas().style.cursor = \"\";\n    });\n    map.on(\"mouseleave\", \"byggnadsaldre\", function () {\n      map.getCanvas().style.cursor = \"\";\n    });\n\n    // Add navigation\n    map.addControl(\n      new mapboxgl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true,\n        },\n        trackUserLocation: true,\n      }),\n      \"bottom-left\"\n    );\n\n    map.addControl(new mapboxgl.NavigationControl(), \"bottom-left\");\n\n    // MENU block\n    // enumerate ids of the layers\n    var toggleableLayerIds = [\"energiklass\", \"byggnadsaldre\"];\n    var menuIcons = [\"fire\", \"hourglass\"];\n    var hoverTexts = [\"Visa energiklasskarta\", \"Visa byggnadsäldrekarta\"];\n\n    // set up the corresponding toggle button for each layer\n    for (var i = 0; i < toggleableLayerIds.length; i++) {\n      var id = toggleableLayerIds[i];\n      var iconImage = menuIcons[i];\n      var hoverText = hoverTexts[i]\n\n      var activeLayer = this.state.activeLayer;\n\n      var button = document.createElement(\"button\");\n      button.Name = id;\n      button.href = \"#\";\n      button.title = hoverText;\n      button.className = (i === 0) ? \"ui toggle button blue\" : \"ui toggle button\";\n\n      var icon = document.createElement(\"i\");\n      icon.className = iconImage + \" icon\";\n      button.appendChild(icon);\n\n      button.onclick = function (e) {\n        var clickedLayer = this.Name;\n        e.preventDefault();\n        e.stopPropagation();\n\n        var visibility = map.getLayoutProperty(clickedLayer, \"visibility\");\n\n        if (visibility !== \"visible\") {\n          var activeButton = document.getElementsByClassName(\n            \"ui toggle button blue\"\n          )[0];\n\n          activeButton.className=\"ui toggle button\";\n          this.className=\"ui toggle button blue\";\n          map.setLayoutProperty(activeLayer, \"visibility\", \"none\");\n          map.setLayoutProperty(clickedLayer, \"visibility\", \"visible\");\n          activeLayer = clickedLayer;\n        }\n\n      };\n\n      var layers = document.getElementsByClassName(\n        \"ui vertical icon buttons\"\n      )[0];\n      layers.appendChild(button);\n    };\n  };\n\n  render() {\n    return (\n      <div>\n        <div className=\"sidebar-left\">\n          <div>\n            <i className=\"eye icon\"></i>\n            Oden [Stockholm & Uppsala]\n            <br />\n            Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom:{\" \"}\n            {this.state.zoom}\n          </div>\n        </div>\n        <div className=\"sidebar-right\">\n          <div>\n            <div className=\"ui vertical icon buttons\"></div>\n          </div>\n        </div>\n        <div\n          ref={(element) => (this.mapContainer = element)}\n          className=\"mapContainer\"\n        />\n      </div>\n    );\n  };\n}\n\nexport default PrettyMap;\n","import React from 'react';\nimport PrettyMap from './PrettyMap';\n\nclass App extends React.Component {\n\n  render(){\n    return <div><PrettyMap/></div>\n  }\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\n\n\nReactDOM.render(\n  <App/>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}